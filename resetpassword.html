<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="logistics.css">
</head>
<body>

    
    <div class="container">
      <h1 class="form-title">Password Reset</h1>
      <form  id="passwordReset" method="POST">
        <div class="main-user-info">
        
          <div class="user-input-box">
            <label for="username"> Username </label>
            <input
              type="text"
              id="username"
              name="username"
              placeholder="Enter username "
              required
            />
          </div>
          <div class="user-input-box">
            <label for="otp">Otp</label>
            <input
              type="text"
              id="otp"
              name="otp"
              placeholder="Enter otp"
              required
            />
          </div>
          

            <div class="user-input-box">
            <label for="password">New password</label>
            <input
              type="password"
              id="password"
              name="password"
              placeholder=" Enter password"
              required
            />
          </div>
          <div class="user-input-box">
            <label for="confirm_password"> Comfirm Password</label>
            <input
              type="password"
              id="confirm_password"
              name="confirm_password"
              placeholder="confirm_password"
              required
            />
          </div>
           <div class="form-submit-btn">
          <input type="submit" value="Submit"  />

          </div>

          
         

     
          
        </form>

    <script >
document.getElementById("passwordReset").addEventListener('submit', passwordReset);
    
    function passwordReset(e){
        e.preventDefault();
        let username = document.getElementById('username').value;  
        let otp  = document.getElementById('otp').value; 
        let password = document.getElementById('password').value;
        let confirm_password = document.getElementById('confirm_password').value;
     
    fetch("https://nbtms.pythonanywhere.com/api/staff/password_reset/",{
        method:'POST',
        headers: {
            'Accept': 'application/json, text/plain, */*',
            'Content-type' : 'application/json',
        },
        body:JSON.stringify({username:username,otp:otp,password:password,confirm_password:confirm_password})
        
        } )
   .then((res) => {
    
     if(res.status === 200){
         alert('password changed login in with new password')
            window.location.replace("index.html");
            res.json().then((result)=>{
                console.log(result);
            })
          }
                else {
                    alert("wrong user info");
                    return;
                }
    
            })
            }

    </script>
</body>
</html>