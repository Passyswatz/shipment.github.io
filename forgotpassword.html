<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="logistics.css">
</head>
<body>

    
    <div class="container">
      <h1 class="form-title">Forgot Password</h1>
      <form  id="userforgotPassword" method="POST" >
        <div class="main-user-info">
        
          <div class="user-input-box">
            <label for="user"> Username or Email address</label>
            <input
              type="text"
              id="user"
              name="user"
              placeholder="Enter username or email address"
              required
            />
          </div>


           <div class="form-submit-btn">
          <input type="submit" value="Submit"  />

          <p>Don't have an account register? <a href="register.html">Sign Up</a> </p>
          </form>
   <script >

document.getElementById("userforgotPassword").addEventListener('submit', userforgotPassword);
    
    function userforgotPassword(e){
        e.preventDefault();
        let user = document.getElementById('user').value;   
     
    fetch("https://nbtms.pythonanywhere.com/api/staff/token_request/",{
        method:'POST',
        headers: {
            'Accept': 'application/json, text/plain, */*',
            'Content-type' : 'application/json',
   
        },
        body:JSON.stringify({user:user})
        
        } )
   .then((res) => {
    
     if(res.status === 200){
         alert('put in the otp sent to your email')
            window.location.replace("resetpassword.html");
            res.json().then((result)=>{
                console.log(result);
            })
          }
                else {
                    alert("username or email is not registered please register ");
                    return;
                }
    
            })
            }
</script>  

        </body>
        </html>